/*****************************************************************************************************//**
*
* @file		GPIO.c
* @brief	Módulo para manejo de Entradas y Salidas de Propósito General (GPIO: General Purpose IO).
* 			Este módulo es un complemento al desarrollado por NXP como librería y que esta incluido en
* 			este proyecto (lpc17xx_gpio.c y lpc17xx_gpio.h)
* @version	1.00
* @date		16/08/2017
* @author	Agustin G. Gimeno (AGG)
*
*
*********************************************************************************************************
*** REVISION HISTORY
*
********************************************************************************************************/

/********************************************************************************************************
*** INCLUDES
********************************************************************************************************/
#include "gpio.h"
#include "My_Types.h"


/********************************************************************************************************
*** PRIVATE DEFINES
********************************************************************************************************/


/********************************************************************************************************
*** PRIVATE MACROS
********************************************************************************************************/


/********************************************************************************************************
*** PRIVATE DATA TYPES
********************************************************************************************************/


/********************************************************************************************************
*** PRIVATE TABLES
********************************************************************************************************/


/********************************************************************************************************
*** PUBLIC GLOBAL VARIABLES
********************************************************************************************************/


/********************************************************************************************************
*** PRIVATE GLOBAL VARIABLES
********************************************************************************************************/


/********************************************************************************************************
*** PRIVATE FUNCTION PROTOTYPES
********************************************************************************************************/


/********************************************************************************************************
*** CONFIGURATION ERRORS
********************************************************************************************************/


/*-----------------------------------------------------------------------------------------------------*/


/********************************************************************************************************
*** PUBLIC FUNCTIONS
********************************************************************************************************/
void GPIO_InitPinAsGPIO(uint8_t portNum, uint8_t pinNum, PIN_DIRECTION dir, PIN_RES_MODE resMode, PIN_OD_MODE odMode)
{
//	GPIO_SetPinFunc(portNum,pinNum,DAFAULT_FUNC);
//	GPIO_SETpINdIR(portNum,pinNum,dir);
//	GPIO_SetResistorMode(portNum,pinNum,resMode);
//	GPIO_SetOpenDrainMode(portNum,pinNum,odMode);
}
/********************************************************************************************************/
void GPIO_InitPinNotAsGPIO(uint8_t portNum, uint8_t pinNum, PIN_FUNCTION func, PIN_RES_MODE resMode, PIN_OD_MODE odMode)
{
//	GPIO_SetPinFunc(portNum,pinNum,func);
//	GPIO_SetResistorMode(portNum,pinNum,resMode);
//	GPIO_SetOpenDrainMode(portNum,pinNum,odMode);
}
/********************************************************************************************************/
void GPIO_SetPinFunc(uint8_t portNum, uint8_t pinNum, PIN_FUNCTION func)
{
	uint32_t pinNum_t = pinNum;
	uint32_t pinSelReg_idx = 2 * portNum;
	uint32_t *pPinCon = (uint32_t *)&LPC_PINCON->PINSEL0;

	if (pinNum_t >= 16)
	{
		pinNum_t -= 16;
		pinSelReg_idx++;
	}
	*(uint32_t *)(pPinCon + pinSelReg_idx) &= ~(0x03UL << (pinNum_t * 2));
	*(uint32_t *)(pPinCon + pinSelReg_idx) |= ((uint32_t)func) << (pinNum_t * 2);
}
/********************************************************************************************************/
void GPIO_SetResistorMode ( uint8_t portNum, uint8_t pinNum, PIN_RES_MODE resMode)
{

}
/********************************************************************************************************/
void GPIO_SetOpenDrainMode( uint8_t portNum, uint8_t pinNum, PIN_OD_MODE odMode)
{

}
/********************************************************************************************************/
void GPIO_CLRpIN(uint8_t portNum, uint8_t pinNum, PIN_ACTIVITY activity)
{

}
/********************************************************************************************************/
DIGITAL_STATE GPIO_GETpINsTATE(uint8_t portNum, uint8_t pinNum, PIN_ACTIVITY activity)
{
	DIGITAL_STATE retval = STATE_ON;

	return retval;
}
/********************************************************************************************************/
void GPIO_SETpINsTATE(uint8_t portNum, uint8_t pinNum, PIN_ACTIVITY activity, bool_t state)
{

}
/********************************************************************************************************/
void GPIO_SETpINdIR(uint8_t portNum, uint8_t pinNum, PIN_DIRECTION dir)
{
	if((PIN_DIRECTION)dir == (PIN_DIRECTION)DIR_IN)
	{
		((LPC_GPIO_TypeDef *)LPC_GPIO_BASE+portNum)->FIODIR &= ~(0x01 << pinNum);
	}else
	{
		((LPC_GPIO_TypeDef *)LPC_GPIO_BASE+portNum)->FIODIR |= (0x01 << pinNum);
	}
}
/********************************************************************************************************/
void GPIO_SETpIN(uint8_t portNum, uint8_t pinNum, PIN_ACTIVITY activity)
{

}
/********************************************************************************************************
*** PRIVATE FUNCTIONS
********************************************************************************************************/


/*-----------------------------------------------------------------------------------------------------*/
